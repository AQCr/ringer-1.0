{% comment %}
  Hero Section - Based on Reference Design
  Tailwind CSS + Shopify 2.0/3.0 features
  Cards slightly overlapping below buttons, centered layout
{% endcomment %}

<section
  class="relative overflow-hidden bg-cover bg-center py-20 md:py-32 text-center"
  style="background-image: url({{ section.settings.bg_image | image_url: width: 2000 }});"
>
  <!-- Overlay -->
  <div class="absolute inset-0 bg-black/30"></div>

  <div class="relative z-10 max-w-5xl mx-auto px-4">
    <!-- Headings -->
    <h1 class="text-4xl md:text-6xl font-bold text-white mb-6">
      {{ section.settings.heading }}
    </h1>
    <p class="text-lg md:text-xl text-white/90 mb-8">
      {{ section.settings.subheading }}
    </p>

    <!-- Buttons -->
    <div class="flex flex-wrap justify-center gap-4 mb-16">
      {% if section.settings.primary_button_text != blank %}
        <a href="{{ section.settings.primary_button_link }}"
           class="bg-white text-gray-900 font-semibold px-6 py-3 rounded-md shadow hover:bg-gray-100 transition">
          {{ section.settings.primary_button_text }}
        </a>
      {% endif %}
      {% if section.settings.secondary_button_text != blank %}
        <a href="{{ section.settings.secondary_button_link }}"
           class="border border-white text-white font-semibold px-6 py-3 rounded-md hover:bg-white/10 transition">
          {{ section.settings.secondary_button_text }}
        </a>
      {% endif %}
    </div>

    <!-- Overlapping Cards -->
    <div class="relative flex justify-center items-center gap-0 md:gap-0">
      {% assign blocks = section.blocks %}
      {% for block in blocks %}
        {% assign index = forloop.index %}
        {% case index %}
          {% when 1 %}
            {% assign translate = '-translate-x-12 rotate-[-5deg]' %}
            {% assign z = 'z-0' %}
          {% when 2 %}
            {% assign translate = 'scale-105 z-20' %}
            {% assign z = 'z-20' %}
          {% when 3 %}
            {% assign translate = 'translate-x-12 rotate-[5deg]' %}
            {% assign z = 'z-0' %}
        {% endcase %}

        <div class="relative transition-transform duration-500 transform {{ translate }} {{ z }}">
          <div class="w-40 h-56 md:w-56 md:h-80 bg-white rounded-xl shadow-xl overflow-hidden">
            {% case block.settings.content_type %}
              {% when 'image' %}
                {% if block.settings.image %}
                  <img src="{{ block.settings.image | image_url: width: 600 }}" alt=""
                       width="600" height="800"
                       class="w-full h-full object-cover">
                {% else %}
                  <div class="w-full h-full flex items-center justify-center text-gray-400">Upload image</div>
                {% endif %}

              {% when 'product' %}
                {% assign product = all_products[block.settings.product] %}
                {% if product %}
                  <div class="p-4 flex flex-col justify-between h-full text-left">
                    <div class="aspect-square mb-3">
                      <img src="{{ product.featured_image | image_url: width: 400 }}" alt="{{ product.title }}"
                           width="400" height="400"
                           class="rounded-lg object-cover w-full h-full" />
                    </div>
                    <h3 class="text-sm font-semibold">{{ product.title }}</h3>
                    <p class="text-gray-600 text-sm">{{ product.price | money }}</p>
                  </div>
                {% else %}
                  <div class="w-full h-full flex items-center justify-center text-gray-400">Select product</div>
                {% endif %}

              {% when 'review' %}
                <div class="p-5 flex flex-col justify-center h-full bg-white rounded-xl text-left">
                  <p class="text-gray-700 italic mb-3 leading-snug">"{{ block.settings.review_text }}"</p>
                  <div class="flex items-center justify-between mt-auto">
                    <p class="text-gray-900 font-semibold text-sm">â€“ {{ block.settings.reviewer_name }}</p>
                    <div class="flex space-x-1">
                      {% for i in (1..block.settings.review_stars) %}
                        <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="w-4 h-4 text-yellow-400"
                             viewBox="0 0 20 20">
                          <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.286 3.95a1 1 0 00.95.69h4.162c.969 0 1.371 1.24.588 1.81l-3.37 2.448a1 1 0 00-.364 1.118l1.287 3.95c.3.922-.755 1.688-1.54 1.118l-3.37-2.449a1 1 0 00-1.175 0l-3.37 2.45c-.785.57-1.84-.197-1.54-1.118l1.287-3.951a1 1 0 00-.364-1.118L2.07 9.377c-.783-.57-.38-1.81.588-1.81h4.162a1 1 0 00.95-.69l1.279-3.95z"/>
                        </svg>
                      {% endfor %}
                    </div>
                  </div>
                </div>
            {% endcase %}
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "HeroSection",
  "settings": [
    { "type": "image_picker", "id": "bg_image", "label": "Background Image" },
    { "type": "text", "id": "heading", "label": "Main Heading", "default": "Your Hero Headline" },
    { "type": "text", "id": "subheading", "label": "Subheading", "default": "Your subheading goes here" },
    { "type": "text", "id": "primary_button_text", "label": "Primary Button Text", "default": "Shop Now" },
    { "type": "url", "id": "primary_button_link", "label": "Primary Button Link" },
    { "type": "text", "id": "secondary_button_text", "label": "Secondary Button Text", "default": "Learn More" },
    { "type": "url", "id": "secondary_button_link", "label": "Secondary Button Link" }
  ],
  "blocks": [
    {
      "type": "card",
      "name": "Card",
      "settings": [
        {
          "type": "select",
          "id": "content_type",
          "label": "Content Type",
          "options": [
            { "value": "image", "label": "Image" },
            { "value": "product", "label": "Product" },
            { "value": "review", "label": "Review" }
          ],
          "default": "image"
        },
        { "type": "image_picker", "id": "image", "label": "Image" },
        { "type": "product", "id": "product", "label": "Product" },
        { "type": "text", "id": "review_text", "label": "Review Text", "default": "Amazing product, love it!" },
        { "type": "text", "id": "reviewer_name", "label": "Reviewer Name", "default": "John Doe" },
        {
          "type": "range",
          "id": "review_stars",
          "label": "Star Rating",
          "min": 1,
          "max": 5,
          "step": 1,
          "default": 5
        }
      ]
    }
  ],
  "presets": [
    { "name": "Hero Section", "category": "Hero" }
  ]
}
{% endschema %}
